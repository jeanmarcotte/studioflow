(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[931],{6083:function(e,t,n){Promise.resolve().then(n.bind(n,8836))},8836:function(e,t,n){"use strict";n.r(t),n.d(t,{default:function(){return u}});var s=n(3827),r=n(4090),a=n(7907),i=n(4958);function u(){let[e,t]=(0,r.useState)(!0),n=(0,a.useRouter)();return(0,r.useEffect)(()=>{(async()=>{let{user:e,error:t}=await (0,i.ts)();if(t||!e){n.push("/login");return}"admin"===localStorage.getItem("studioflow-mode")?n.push("/admin/dashboard"):n.push("/client/new-quote")})()},[n]),(0,s.jsx)("div",{className:"min-h-screen flex items-center justify-center bg-background",children:(0,s.jsxs)("div",{className:"text-center space-y-4",children:[(0,s.jsx)("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-primary mx-auto"}),(0,s.jsxs)("div",{className:"space-y-2",children:[(0,s.jsx)("h2",{className:"text-2xl font-semibold",children:"StudioFlow"}),(0,s.jsx)("p",{className:"text-muted-foreground",children:"Loading your dashboard..."}),(0,s.jsx)("p",{className:"text-sm text-muted-foreground mt-4",children:"Isaac was here"})]})]})})}},4958:function(e,t,n){"use strict";n.d(t,{H:function(){return l},Nh:function(){return d},OQ:function(){return i},qj:function(){return o},ry:function(){return c},ts:function(){return u}});var s=n(7688);let r="https://ntysfrgjwwcrtgustteb.supabase.co",a="eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzdXBhYmFzZSIsInJlZiI6Im50eXNmcmdqd3djcnRndXN0dGViIiwicm9sZSI6ImFub24iLCJpYXQiOjE3NzAxMzQ0MDgsImV4cCI6MjA4NTcxMDQwOH0.UUiWd0FvJlpXdUXe7J7XHA1mvt5momLHRRL1mDznJec";console.log("Supabase Config:",{url:r,keyLength:a.length,keyPrefix:a.substring(0,20)+"..."});let i=(0,s.eI)(r,a,{auth:{debug:!0,autoRefreshToken:!0,persistSession:!0,detectSessionInUrl:!0}});i.auth.onAuthStateChange((e,t)=>{console.log("Auth state change:",e,t)});let u=async()=>{let{data:{user:e},error:t}=await i.auth.getUser();return{user:e,error:t}},o=async()=>{let{data:e,error:t}=await i.auth.signInWithOAuth({provider:"google",options:{redirectTo:"".concat(window.location.origin,"/auth/callback")}});return{data:e,error:t}},c=async()=>{let{data:{session:e},error:t}=await i.auth.getSession();return{session:e,error:t}},l=async()=>{let{data:{session:e},error:t}=await i.auth.getSession();return!t&&(null==e?void 0:e.user)?{user:e.user,error:null}:{user:null,error:t}},d=async(e,t)=>{let{data:n,error:s}=await i.from("ballots").select("*").ilike("bride_first_name","%".concat(e,"%")).ilike("groom_first_name","%".concat(t,"%")).limit(5);return{data:n,error:s}}}},function(e){e.O(0,[436,971,69,744],function(){return e(e.s=6083)}),_N_E=e.O()}]);