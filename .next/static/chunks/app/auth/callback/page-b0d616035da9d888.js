(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[453],{3524:function(e,t,n){Promise.resolve().then(n.bind(n,4798))},4798:function(e,t,n){"use strict";n.r(t),n.d(t,{default:function(){return u}});var i=n(3827),r=n(4090),a=n(7907),s=n(4958);function u(){let e=(0,a.useRouter)();return(0,r.useEffect)(()=>{let t=setTimeout(async()=>{let{user:t,error:n}=await (0,s.H)();if(n||!t){console.log("Auth failed:",n),e.push("/login");return}t.email&&["jeanmarcotte@gmail.com","marianna@sigsphoto.ca"].includes(t.email)?(console.log("User authorized:",t.email),e.push("/client/new-quote")):(console.log("Unauthorized email:",t.email),await s.OQ.auth.signOut(),e.push("/login?error=unauthorized"))},100);return()=>clearTimeout(t)},[e]),(0,i.jsx)("div",{className:"min-h-screen flex items-center justify-center bg-background",children:(0,i.jsxs)("div",{className:"text-center space-y-4",children:[(0,i.jsx)("div",{className:"animate-spin rounded-full h-8 w-8 border-b-2 border-primary mx-auto"}),(0,i.jsx)("p",{className:"text-sm text-muted-foreground",children:"Processing authentication..."})]})})}},4958:function(e,t,n){"use strict";n.d(t,{H:function(){return l},Nh:function(){return d},OQ:function(){return s},qj:function(){return o},ry:function(){return c},ts:function(){return u}});var i=n(7688);let r="https://ntysfrgjwwcrtgustteb.supabase.co",a="eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzdXBhYmFzZSIsInJlZiI6Im50eXNmcmdqd3djcnRndXN0dGViIiwicm9sZSI6ImFub24iLCJpYXQiOjE3NzAxMzQ0MDgsImV4cCI6MjA4NTcxMDQwOH0.UUiWd0FvJlpXdUXe7J7XHA1mvt5momLHRRL1mDznJec";console.log("Supabase Config:",{url:r,keyLength:a.length,keyPrefix:a.substring(0,20)+"..."});let s=(0,i.eI)(r,a,{auth:{debug:!0,autoRefreshToken:!0,persistSession:!0,detectSessionInUrl:!0}});s.auth.onAuthStateChange((e,t)=>{console.log("Auth state change:",e,t)});let u=async()=>{let{data:{user:e},error:t}=await s.auth.getUser();return{user:e,error:t}},o=async()=>{let{data:e,error:t}=await s.auth.signInWithOAuth({provider:"google",options:{redirectTo:"".concat(window.location.origin,"/auth/callback")}});return{data:e,error:t}},c=async()=>{let{data:{session:e},error:t}=await s.auth.getSession();return{session:e,error:t}},l=async()=>{let{data:{session:e},error:t}=await s.auth.getSession();return!t&&(null==e?void 0:e.user)?{user:e.user,error:null}:{user:null,error:t}},d=async(e,t)=>{let{data:n,error:i}=await s.from("ballots").select("*").ilike("bride_first_name","%".concat(e,"%")).ilike("groom_first_name","%".concat(t,"%")).limit(5);return{data:n,error:i}}}},function(e){e.O(0,[436,971,69,744],function(){return e(e.s=3524)}),_N_E=e.O()}]);